TCコマンドメモ

作業内容(10/04)
WGETやstressコマンドでは恐らくキャッシュが原因で思うように回線速度を落とせなかった。

・TCコマンドではどうか検証
制限:sudo tc qdisc add dev wlan0 root tbf limit 200b buffer 100b rate 200bps
制限解除:sudo tc qdisc del dev wlan0 root
→同様にキャッシュが邪魔をして連続リクエストでは遅くならない。
しかし、10秒程空けるとキャッシュが削除されて、TCコマンドの効果が現れる。
WGETよりも調整が効く便利なコマンドなので実験で使いたい。

・DNSのキャッシュを溜めない方法を模索
→削除はあるが溜めない方法は見つからなかった。

作業予定：
今後行う実験では、連続してリクエストを送らないので
「異種のネットワークアダプタの再現」：TCコマンド
「性能の違い」：stressコマンド
を利用し、とりあえず実験してみることにする。

調査を進めるとTCコマンドで制御できることが分かった。



参考：
https://qiita.com/hana_shin/items/d9ba818b49aca87b2314
https://cha-shu00.hatenablog.com/entry/2020/02/10/131836

試してみたところWGETやstress同様、最初の1回は遅くなるが以降は遅延が1msと短い。

2代のPCから同時にPINGを送信してもやはり最初が遅く
同一ＩＰから連続してリクエストを送るとキャッシュが発生することが分かった。


→実験では連続して、リクエストを送らないので
異種のネットワークアダプタの再現はTCコマンドを利用することにした。


